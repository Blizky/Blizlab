<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RetroCut – Offline editor + background removal by Blizlab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" type="image/svg+xml" href="./assets/svg/fabicon.svg">
  <link rel="stylesheet" href="retrocut.css">
</head>

<body>
  <header class="app-topbar">
    <h1 class="app-title">
      <img src="./assets/svg/blizlab_logo_flat.svg" alt="Blizlab" width="220" height="50">
      <button class="logo-bolt-hit" id="logoBoltBtn" type="button" aria-label="Blizlab bolt effect" title="Blizlab bolt"></button>
      <span class="logo-sparks" id="logoSparks" aria-hidden="true"></span>
    </h1>
    <div class="topbar-actions">
      <button class="topbar-menu-btn" id="aboutToggleBtn" type="button" aria-expanded="true" aria-controls="appAboutPanel">
        <span>About</span>
        <img class="menu-icon-up" src="./svg/up_line.svg" alt="" width="14" height="14" aria-hidden="true">
        <img class="menu-icon-down" src="./svg/down_line.svg" alt="" width="14" height="14" aria-hidden="true">
      </button>
      <div class="topbar-more-wrap">
        <button class="topbar-menu-btn topbar-icon-btn" id="moreToggleBtn" type="button" aria-expanded="false" aria-controls="moreMenu" aria-label="Open menu" title="Menu">
          <img class="menu-main-icon" src="./svg/menu_line.svg" alt="" width="18" height="18" aria-hidden="true">
        </button>
        <div class="topbar-dropdown more-menu" id="moreMenu" hidden>
          <div class="setting-label">Canvas</div>
          <div class="setting-sub-label">Format</div>
          <div class="chips definition-chips" id="canvasFormatChips">
            <button class="chip-btn" data-canvas-format="11" type="button"><span>1:1</span></button>
            <button class="chip-btn active" data-canvas-format="43" type="button"><span>4:3</span></button>
            <button class="chip-btn" data-canvas-format="45" type="button"><span>4:5</span></button>
            <button class="chip-btn" data-canvas-format="169" type="button"><span>16:9</span></button>
          </div>
          <div class="setting-sub-label">Orientation</div>
          <div class="chips definition-chips" id="canvasOrientationChips">
            <button class="chip-btn active" data-canvas-orientation="horizontal" type="button"><span>Horizontal</span></button>
            <button class="chip-btn" data-canvas-orientation="vertical" type="button"><span>Vertical</span></button>
          </div>

          <div class="setting-label">Canvas definition</div>
          <div class="chips definition-chips" id="definitionChips">
            <button class="chip-btn active" data-definition="sd" type="button"><span>SD</span></button>
            <button class="chip-btn" data-definition="hd" type="button"><span>HD</span></button>
            <button class="chip-btn" data-definition="4k" type="button"><span>4K</span></button>
          </div>
          <div class="setting-note">Downscale workspace and exports to selected definition.</div>
          <label class="setting-toggle" for="upscaleLowResToggle">
            <input type="checkbox" id="upscaleLowResToggle">
            <span>Upscale low-res images</span>
          </label>
          <label class="setting-toggle" for="downscaleImportsToggle">
            <input type="checkbox" id="downscaleImportsToggle" checked>
            <span>Downscale imported images</span>
          </label>
          <div class="setting-note">Default ON. Normalizes imports for smoother editing and consistent layer ZIP sizes.</div>
          <div class="setting-note">Simple stretch upscale only. Pixelation can happen.</div>
          <div class="more-links">
            <p class="more-text">Help &amp; FAQ: <a href="./help.html" target="_blank" rel="noopener">Open guide</a></p>
            <p class="more-text">Support Blizlab: <a href="https://ko-fi.com/blizky" target="_blank" rel="noopener">ko-fi.com/blizky</a></p>
            <p class="more-text">Contact us: coming soon</p>
          </div>
        </div>
      </div>
    </div>
  </header>

  <section class="about-panel" id="appAboutPanel">
    <div class="about-panel-inner">
      <section class="hero-carousel" id="heroCarousel" aria-label="Blizlab feature scenes">
        <div class="hero-parallax" aria-hidden="true">
          <div class="hero-parallax-layer hero-parallax-back"></div>
          <div class="hero-parallax-layer hero-parallax-mid"></div>
          <div class="hero-parallax-layer hero-parallax-front"></div>
          <div class="hero-parallax-shade"></div>
        </div>
        <div class="hero-head">
          <h2>Chop, stack<br>and make it move<span class="hero-tilt-exclaim">!</span></h2>
        </div>
        <div class="hero-scenes-window">
          <div class="hero-scenes-track" id="heroScenesTrack">
            <article class="hero-scene">
              <div class="hero-scene-content">
                <figure class="hero-scene-visual">
                  <img src="./assets/images/hero-scene-01.gif" alt="Hero scene 1 preview">
                </figure>
                <p class="hero-scene-copy">Import, paste, and layer visuals quickly so ideas move from draft to polished composition without context switching.</p>
              </div>
            </article>
            <article class="hero-scene">
              <div class="hero-scene-content">
                <figure class="hero-scene-visual">
                  <img src="./assets/images/hero-scene-02.jpg" alt="Hero scene 2 preview">
                </figure>
                <p class="hero-scene-copy">Full background removal kit with brush and adjustment controls on each layer for fast and easy matching.</p>
              </div>
            </article>
            <article class="hero-scene">
              <div class="hero-scene-content">
                <figure class="hero-scene-visual">
                  <img src="./assets/images/hero-scene-03.gif" alt="Hero scene 3 preview">
                </figure>
                <p class="hero-scene-copy">Create GIF animations ready to share, or pack all the layers in high quality PNG for your video editor.</p>
              </div>
            </article>
          </div>
        </div>
        <div class="hero-scene-controls">
          <button class="hero-scene-arrow" id="heroPrevBtn" type="button" aria-label="Previous scene">
            <img src="./svg/left_line.svg" alt="" width="14" height="14" aria-hidden="true">
          </button>
          <div class="hero-scene-dots" id="heroSceneDots" role="tablist" aria-label="Hero scenes">
            <button class="hero-scene-dot is-active" type="button" role="tab" aria-selected="true" aria-label="Go to scene 1" data-hero-scene="0"></button>
            <button class="hero-scene-dot" type="button" role="tab" aria-selected="false" aria-label="Go to scene 2" data-hero-scene="1"></button>
            <button class="hero-scene-dot" type="button" role="tab" aria-selected="false" aria-label="Go to scene 3" data-hero-scene="2"></button>
          </div>
          <button class="hero-scene-arrow" id="heroNextBtn" type="button" aria-label="Next scene">
            <img src="./svg/right_line.svg" alt="" width="14" height="14" aria-hidden="true">
          </button>
        </div>
        <div class="about-actions">
          <button class="about-start-btn" id="aboutStartBtn" type="button">Start using Blizlab</button>
        </div>
      </section>
    </div>
  </section>

  <main class="page-main">
    <div class="app-layout imagestudio-main">
      <aside class="side-panel" id="sidePanel">
          <div class="card sidebar" id="sidebarCard">
            <div class="controls-group">
              <div class="sidebar-section-title">IMAGE</div>

              <div class="actions-inline">
                <label class="file-button">
                  <input type="file" id="fileInput" accept="image/*" />
                  <img src="./svg/upload_2_line.svg" alt="" width="16" height="16">
                  <span>Image</span>
                </label>
                <button class="file-button" id="pasteImageBtn" type="button" aria-label="Paste image from clipboard" title="Paste image from clipboard">
                  <img src="./svg/paster_line.svg" alt="" width="16" height="16">
                </button>
                <button class="main" id="downloadEditorBtn" disabled>
                  <img src="./svg/download_2_line.svg" alt="" width="16" height="16">
                  <span>Download</span>
                </button>
              </div>
              <div class="file-name" id="fileNameText">No file selected.</div>
              <div class="handoff-row">
                <button class="secondary-btn" id="btnAddCompositionLayer" disabled>
                  <span>Add composition as new layer</span>
                  <img src="./svg/arrow_right_line.svg" alt="" width="14" height="14">
                </button>
              </div>
              <div class="sidebar-quick-actions" id="sidebarQuickActions" aria-label="Quick actions">
                <button class="quick-action-btn" id="btnQuickUpload" type="button" title="Upload image" aria-label="Upload image">
                  <img src="./svg/upload_2_line.svg" alt="" width="16" height="16">
                </button>
                <button class="quick-action-btn" id="btnQuickPaste" type="button" title="Paste image" aria-label="Paste image">
                  <img src="./svg/paster_line.svg" alt="" width="16" height="16">
                </button>
                <button class="quick-action-btn" id="btnQuickDownload" type="button" title="Download" aria-label="Download" disabled>
                  <img src="./svg/download_2_line.svg" alt="" width="16" height="16">
                </button>
                <button class="quick-action-btn" id="btnQuickAddComposition" type="button" title="Add composition layer" aria-label="Add composition layer" disabled>
                  <img src="./svg/layer_line.svg" alt="" width="16" height="16">
                </button>
              </div>
              <div class="export-inline-wrap" id="exportMenuWrap">
                <div class="export-inline-actions">
                  <button class="secondary-btn export-inline-btn export-primary-btn" id="btnImportLayersComposition" data-export-mode="edit" disabled>
                    <span>Import Layers Composition</span>
                    <img class="export-arrow export-arrow-left" src="./svg/arrow_right_line.svg" alt="" width="14" height="14">
                  </button>
                  <button class="secondary-btn export-inline-btn export-primary-btn" id="sendToLayersBtn" data-export-mode="edit" disabled>
                    <span>Export to new Layer</span>
                    <img class="export-arrow" src="./svg/arrow_right_line.svg" alt="" width="14" height="14">
                  </button>
                  <button class="secondary-btn export-inline-btn" id="btnApplyCutout" data-export-mode="cutout" disabled>Retro</button>
                  <button class="secondary-btn export-inline-btn" id="btnSendCutoutToLayers" data-export-mode="cutout" disabled>Layers</button>
                </div>
              </div>
            </div>

            <div id="editPanel">
              <div class="controls-group">
                <div class="sidebar-section-title">STYLE</div>
                <div class="chips" id="styleChips">
                  <button class="chip-btn active" data-style="bw"><span class="style-dot bw"></span><span>B&amp;W</span></button>
                  <button class="chip-btn" data-style="sepia"><span class="style-dot sepia"></span><span>Sepia</span></button>
                  <button class="chip-btn" data-style="postal"><span class="style-dot postal"></span><span>Card</span></button>
                </div>
              </div>

              <div class="controls-group">
                <div class="slider-group">
                  <label for="intensity">Style intensity</label>
                  <div class="slider-row">
                    <input type="range" id="intensity" min="0" max="100" value="50" />
                    <span id="intensityValue">50</span>
                  </div>
                </div>

                <div class="slider-group">
                  <label for="roundness">Rounded corners</label>
                  <div class="slider-row">
                    <input type="range" id="roundness" min="0" max="80" value="0" />
                    <span id="roundnessValue">0</span>
                  </div>
                </div>

                <div class="slider-group">
                  <label for="noise">Film grain</label>
                  <div class="slider-row">
                    <input type="range" id="noise" min="0" max="100" value="15" />
                    <span id="noiseValue">15</span>
                  </div>
                </div>
              </div>

              <div class="controls-group">
                <div class="sidebar-section-title">ADJUSTMENTS</div>
                <div class="adjustment-actions">
                  <button class="secondary-btn" id="fillBtn">Fill</button>
                  <button class="secondary-btn" id="resetEditBtn" disabled>Reset</button>
                </div>
              </div>
            </div>

            <div id="cutoutPanel" hidden>
              <div class="controls-group">
                <div class="sidebar-section-title">BACKGROUND</div>
                <button class="primary-btn full-width-btn" id="btnRemove" disabled>Cutout</button>
                <button class="secondary-btn full-width-btn chroma-btn" id="btnRemoveChroma" disabled>Remove chroma key</button>
                <div class="brush-label-row ai-strength-row">
                  <span>Border</span>
                  <span class="brush-value" id="aiStrengthValue">60</span>
                </div>
                <input id="aiStrength" type="range" min="0" max="100" value="60" />
              </div>

              <div class="controls-group">
                <div class="sidebar-section-title">BRUSH</div>
                <div class="brush-label-row">
                  <span>Brush size</span>
                  <span class="brush-value" id="brushValue">28</span>
                </div>
                <input id="brushSize" type="range" min="5" max="120" value="28" />

                <div class="pill-toggle" role="tablist" aria-label="Brush mode">
                  <button id="modeErase" class="active" data-mode="erase" role="tab" aria-selected="true">Erase</button>
                  <button id="modeRestore" data-mode="restore" role="tab" aria-selected="false">Restore</button>
                </div>

                <div class="pill-toggle view-mode-toggle" role="tablist" aria-label="View mode">
                  <button id="viewModeBrush" class="active" data-view-mode="brush" role="tab" aria-selected="true">Brush</button>
                  <button id="viewModeMove" data-view-mode="move" role="tab" aria-selected="false">Move</button>
                </div>

                <div class="undo-redo-row">
                  <button class="secondary-btn" id="btnUndo" disabled>Undo</button>
                  <button class="secondary-btn" id="btnRedo" disabled>Redo</button>
                </div>

              </div>

              <div class="controls-group">
                <div class="sidebar-section-title">ADJUSTMENTS</div>
                <div class="adjustment-actions">
                  <button class="secondary-btn" id="btnResetCutout" disabled>Reset</button>
                  <div class="cutout-bg-switch cutout-bg-switch-inline" role="group" aria-label="Background preview">
                    <button class="cutout-bg-btn active" data-cutout-bg="checker" type="button" title="Checker background" aria-label="Checker background"></button>
                    <button class="cutout-bg-btn" data-cutout-bg="white" type="button" title="White background" aria-label="White background"></button>
                    <button class="cutout-bg-btn" data-cutout-bg="black" type="button" title="Black background" aria-label="Black background"></button>
                    <button class="cutout-bg-btn cutout-bg-context-btn" data-cutout-bg="context" type="button" title="Layer context background" aria-label="Layer context background" hidden>Ctx</button>
                  </div>
                </div>
              </div>
            </div>

            <div id="layersPanel" hidden>
              <div class="controls-group">
                <div class="sidebar-section-title">EXPORT</div>
                <div class="handoff-row">
                  <button class="secondary-btn" id="btnDownloadLayersZip" disabled>
                    <img src="./svg/file_zip_line.svg" alt="" width="14" height="14">
                    <span>Download Layers ZIP</span>
                  </button>
                </div>
              </div>

              <div class="controls-group">
                <button class="parallax-toggle" id="btnParallaxToggle" type="button" aria-expanded="false" aria-controls="parallaxPanelBody">
                  <span>PARALLAX</span>
                  <img src="./svg/arrow_to_down_line.svg" alt="" width="14" height="14">
                </button>
                <div class="parallax-panel" id="parallaxPanelBody" hidden>
                  <div class="parallax-controls">
                    <label class="slider-group" for="parallaxDuration">
                      <span>Duration</span>
                      <div class="slider-row">
                        <input type="range" id="parallaxDuration" min="1" max="5" step="1" value="3">
                        <span id="parallaxDurationValue">3s</span>
                      </div>
                    </label>
                    <label class="slider-group" for="parallaxIntensity">
                      <span>Intensity</span>
                      <div class="slider-row">
                        <input type="range" id="parallaxIntensity" min="25" max="100" step="5" value="50">
                        <span id="parallaxIntensityValue">50%</span>
                      </div>
                    </label>
                    <label class="parallax-row" for="parallaxQualityPreset">
                      <span>Quality</span>
                      <select id="parallaxQualityPreset">
                        <option value="100">100% · Video quality</option>
                        <option value="50" selected>50% · Social media</option>
                        <option value="30">30% · Chat sharing</option>
                      </select>
                    </label>
                    <label class="parallax-row" for="parallaxFps">
                      <span>FPS</span>
                      <select id="parallaxFps">
                        <option value="10">10</option>
                        <option value="15" selected>15</option>
                        <option value="24">24</option>
                      </select>
                    </label>
                    <label class="parallax-row" for="parallaxLoopMode">
                      <span>Loop</span>
                      <select id="parallaxLoopMode">
                        <option value="pingpong" selected>Ping-pong</option>
                        <option value="linear">Linear</option>
                      </select>
                    </label>
                    <label class="parallax-row" for="parallaxMotionType">
                      <span>Motion</span>
                      <select id="parallaxMotionType">
                        <option value="zoom" selected>Zoom</option>
                        <option value="panx">Pan Horizontally</option>
                        <option value="pany">Pan Vertically</option>
                      </select>
                    </label>
                    <label class="parallax-row parallax-row-toggle" for="parallaxLockTop">
                      <span>Lock top layer</span>
                      <input type="checkbox" id="parallaxLockTop">
                    </label>
                  </div>
                  <div class="handoff-row">
                    <button class="secondary-btn" id="btnExportParallaxGif" disabled>
                      <img src="./svg/film_line.svg" alt="" width="14" height="14">
                      <span id="parallaxActionLabel">Create Parallax Animation</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="sidebar-collapse-row">
              <button class="sidebar-collapse-tab" id="sidebarCollapseBtn" type="button" aria-expanded="true" aria-controls="sidebarCard">
                <img class="sidebar-collapse-icon sidebar-open-icon" src="./svg/left_line.svg" alt="" width="16" height="16" aria-hidden="true">
                <img class="sidebar-collapse-icon sidebar-collapsed-icon" src="./svg/right_line.svg" alt="" width="16" height="16" aria-hidden="true">
              </button>
            </div>
          </div>
      </aside>

      <section class="canvas-panel canvas-area">
        <div class="canvas-stack">
          <div class="canvas-drop-zone" id="editorDropZone">
            <canvas id="editorCanvas"></canvas>
            <div class="drop-hint">Drop an image here</div>
          </div>

          <div class="canvas-wrap" id="cutoutWrap" hidden>
            <canvas id="cutoutCanvas"></canvas>
            <div class="brush-preview" id="brushPreview"></div>
            <div class="overlay-msg" id="overlayMsg">
              Drop an image here, or use “Image” on the left.
            </div>
          </div>

          <div class="layers-wrap" id="layersWrap" hidden>
            <div class="layers-canvas-wrap" id="layersCanvasWrap">
              <canvas id="layersCanvas"></canvas>
              <div class="layers-empty-state" id="layersOverlayMsg">
                <div class="layers-empty-content">
                  <img class="layers-empty-icon" src="./svg/pic_ai_line_yellow.svg" alt="" width="38" height="38">
                  <p>Drag or upload your own images.</p>
                </div>
              </div>
            </div>
            <aside class="layers-list-panel">
              <div class="layers-panel-head">
                <div class="layers-head-title">
                  <div class="sidebar-section-title">LAYERS</div>
                  <span class="layers-count" id="layersCountText" aria-live="polite">0/5</span>
                </div>
                <div class="layers-head-actions">
                  <button class="layers-head-btn" id="btnLayersHideAll" type="button" title="Hide all layers" aria-label="Hide all layers">M+</button>
                  <button class="layers-add-btn" id="btnLayersAdd" type="button" title="Add image layer" aria-label="Add image layer">+</button>
                </div>
              </div>
              <div class="layers-list" id="layersList"></div>
              <div class="layers-panel-foot">
                <button class="layers-add-bottom-btn" id="btnLayersAddBottom" type="button" title="Add image as bottom layer" aria-label="Add image as bottom layer">+ Bottom</button>
              </div>
            </aside>
          </div>
        </div>
      </section>
    </div>

    <div class="model-bar-row">
      <div class="model-bar" id="modelBarCanvas" hidden>
        <span class="model-label">AI model</span>
        <span class="model-note-text" id="modelNote">
          U²-Net model downloads once and then works offline in this browser.
        </span>
        <button class="model-btn" id="btnReloadModel">Reload model</button>
        <span class="model-dot" id="modelDot" aria-hidden="true"></span>
      </div>
    </div>
  </main>

  <div class="preview-overlay" id="parallaxPreviewOverlay" hidden>
    <div class="preview-modal" role="dialog" aria-modal="true" aria-labelledby="parallaxPreviewTitle">
      <div class="preview-head">
        <h3 id="parallaxPreviewTitle">Parallax Animation</h3>
      </div>
      <div class="preview-body">
        <img id="parallaxPreviewImage" alt="Parallax animation preview">
      </div>
      <div class="preview-actions">
        <button class="secondary-btn" id="btnSaveParallaxGif" type="button">Save GIF</button>
        <button class="secondary-btn" id="btnCloseParallaxPreview" type="button">Close</button>
      </div>
    </div>
  </div>

  <div class="mobile-blocker" aria-live="polite">
    <div class="mobile-blocker-card" role="dialog" aria-modal="true" aria-labelledby="mobileBlockerTitle" aria-describedby="mobileBlockerDesc">
      <h2 id="mobileBlockerTitle">Desktop Recommended</h2>
      <p id="mobileBlockerDesc">This app is not optimized for phone screens. Use a desktop or laptop for the best experience.</p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gif.js.optimized/dist/gif.js"></script>
  <script type="module" src="imagestudio.js?v=20260220a"></script>
</body>
</html>
